webpackJsonp([5],{HxRP:function(e,s){},MeVl:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t("Xxa5"),r=t.n(a),n=(t("34+y"),t("X+yh")),i=t.n(n),o=t("exGp"),u=t.n(o),c=t("Dd8w"),l=t.n(c),p=t("NYxO"),m=t("qYvl"),d=t.n(m),v={data:function(){return{username:"",password:"",errTip:"",nickname:"",email:"",confirmPassword:"",tab:"login",centerList:[{link:"/random/love_list",title:"喜欢列表"}]}},computed:l()({},Object(p.b)({userInfo:function(e){return e.user.userInfo}})),created:function(){this.$store.dispatch("onType",this.$route.name),this.$store.dispatch("closeLoading")},methods:{login:function(){var e=this;return u()(r.a.mark(function s(){var t;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e.username.trim()&&e.password.trim()){s.next=3;break}return i()("请输入用户名/密码"),s.abrupt("return");case 3:return s.next=5,d.a.post("/api/user/login",{username:e.username,password:e.password});case 5:(t=s.sent).success?e.$store.dispatch("updateUserInfo",{isLogin:!0,user_id:t.user_id,username:t.username}):i()(t.message);case 7:case"end":return s.stop()}},s,e)}))()},register:function(){var e=this;return u()(r.a.mark(function s(){var t;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e.username.trim()&&e.email.trim()){s.next=3;break}return i()("请输入用户名/邮箱"),s.abrupt("return");case 3:if(e.password.trim()===e.confirmPassword.trim()){s.next=6;break}return i()("密码不一样"),s.abrupt("return");case 6:return s.next=8,d.a.post("/api/user/register",{username:e.username,password:e.password,email:e.email});case 8:(t=s.sent).success?e.$store.dispatch("updateUserInfo",{isLogin:!0,user_id:t.user_id,username:t.username}):i()(t.message);case 10:case"end":return s.stop()}},s,e)}))()},toggleTab:function(e){this.tab=e}}},g={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[e.userInfo.isLogin?t("div",{staticClass:"center-wrap"},[t("h1",[e._v(e._s(e.userInfo.username))]),e._v(" "),e._l(e.centerList,function(s,a){return t("router-link",{key:a,staticClass:"center-list",attrs:{to:s.link}},[e._v(e._s(s.title)),t("span",{staticClass:"arrow"},[e._v(">")])])})],2):e._e(),e._v(" "),e.userInfo.isLogin?e._e():t("div",{staticClass:"user-wrap"},[t("header",[t("div",{staticClass:"tab",class:{cur:"login"===e.tab},on:{click:function(s){e.toggleTab("login")}}},[e._v("登录")]),e._v(" "),t("div",{staticClass:"tab",class:{cur:"reg"===e.tab},on:{click:function(s){e.toggleTab("reg")}}},[e._v("注册")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"login"===e.tab,expression:"tab === 'login'"}],staticClass:"login-wrap"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"user-input",attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.username},on:{input:function(s){s.target.composing||(e.username=s.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"user-input",attrs:{type:"password",placeholder:"密码"},domProps:{value:e.password},on:{keyup:function(s){if(!("button"in s)&&e._k(s.keyCode,"enter",13,s.key))return null;e.login(s)},input:function(s){s.target.composing||(e.password=s.target.value)}}}),e._v(" "),t("button",{staticClass:"btn",on:{click:e.login}},[e._v("登录")])]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:"reg"===e.tab,expression:"tab === 'reg'"}],staticClass:"register-wrap"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"user-input",attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.username},on:{input:function(s){s.target.composing||(e.username=s.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"user-input",attrs:{type:"text",placeholder:"邮箱"},domProps:{value:e.email},on:{input:function(s){s.target.composing||(e.email=s.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.nickname,expression:"nickname"}],staticClass:"user-input",attrs:{type:"text",placeholder:"昵称"},domProps:{value:e.nickname},on:{input:function(s){s.target.composing||(e.nickname=s.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"user-input",attrs:{type:"password",placeholder:"密码"},domProps:{value:e.password},on:{input:function(s){s.target.composing||(e.password=s.target.value)}}}),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPassword,expression:"confirmPassword"}],staticClass:"user-input",attrs:{type:"password",placeholder:"确认密码"},domProps:{value:e.confirmPassword},on:{input:function(s){s.target.composing||(e.confirmPassword=s.target.value)}}}),e._v(" "),t("button",{staticClass:"btn",on:{click:e.register}},[e._v("注册")])])])])},staticRenderFns:[]};var w=t("VU/8")(v,g,!1,function(e){t("HxRP")},"data-v-cca954e4",null);s.default=w.exports}});
//# sourceMappingURL=5.1db28b70.js.map